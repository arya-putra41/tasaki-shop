{% extends 'base.html' %}

<!--block meta: untuk menambahkan informasi metadata di head, seperti title-->
{% block meta %}
    <title>Tasaki Shop - Misaka's Best Football</title>
{% endblock meta %}

<!--block content: untuk menambahkan informasi utama webpage-->
{% block content %}
    <div class="title">
        <h1>Tasaki Shop</h1>
        <h2>Misaka City's Best Football Merchandise</h2>
    </div>

    <div class="my_info">
        <h4>Name: </h4>
        <p>{{ name }}</p>
        <h4>You last logged in on: </h4>
        <p>{{ last_login }}</p>
    </div>

    <div class="btns">
        <a href="{% url 'main:create_product' %}">
            <button>== Add New Product ==</button>
        </a>
        <br>
        <a href="{% url 'main:logout' %}">
            <button>== Log Out ==</button>
        </a>
        <br>
        <a href="?filter=all">
            <button type="button">== Show All Products ==</button>
        </a>
        <a href="?filter=my">
            <button type="button">== Show Products Sold By: {{ name }} ==</button>
        </a> 
    </div>

    <hr>

    {% if not product_list %}
        <p>No products are currently registered.</p>
    {% else %}
        {% for product in product_list %}
            <div>
                <h2><a href="{% url 'main:show_product' product.id %}">{{ product.name }}</a></h2>
                
                <!--Show category, stock, and price-->
                <p><b>{{ product.category }} | Stock available: {{ product.stock }}</b>
                   {% if product.is_featured %}<b>| FEATURED PRODUCT!</b>{% endif %}
                </p>
                <p class="price"><b>Price: ${{ product.price }}</b></p>

                <!--Show seller name-->
                {% if product.user %}
                    <p><i>Sold by: {{ product.user.username }}</i></p>
                {% else %}
                    <p><i>Sold by: Anonymous</i></p>
                {% endif %}
                
                <!--Show thumbnail, if exists-->
                {% if product.thumbnail %}
                    <img src="{{ product.thumbnail }}" alt="thumbnail for {{ product.name }}" width="150" height="100">
                    <br/>
                {% endif %}

                <!--Show product description-->
                <p>{{ product.description|truncatewords:25 }}</p>
                <p><a href="{% url 'main:show_product' product.id %}">
                    <button>More about this product...</button>
                </a></p>
            </div>

            <hr>
        {% endfor %}

    {% endif %}
{% endblock content %}